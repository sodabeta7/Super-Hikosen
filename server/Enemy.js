var BulletPool,Enemy,exports,grand,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};BulletPool=require("./BulletPool");grand=function(min,max){return Math.random()*(max-min)+min};Enemy=function(){function Enemy(data){this.prt=bind(this.prt,this);this.gdis=bind(this.gdis,this);this.shoot=bind(this.shoot,this);this.userUpdate=bind(this.userUpdate,this);this.update=bind(this.update,this);this.id=(new Date).getTime();this.x=data.x+grand(-500,500);this.y=data.y+grand(-300,300);this.health=200;this.bullet_pool=new BulletPool(100);this.max_momentum=1/36;this.momentum=0;this.width=38;this.height=28;this.angle=0;this.target_x=0;this.target_y=0;this.target_momentum=0;this.shoot_cnt=0}Enemy.prototype.update=function(mouse){return this.bullet_pool.update(this.x,this.y)};Enemy.prototype.userUpdate=function(angle_tx,angle_ty){this.target_x=angle_tx;this.target_y=angle_ty;return this.angle=Enemy.calAngle(this.x,this.y,angle_tx,angle_ty)};Enemy.prototype.shoot=function(){return this.bullet_pool.get(this.x,this.y,this.angle)};Enemy.calAngle=function(x1,y1,x2,y2){return Math.atan2(y2-y1,x2-x1)};Enemy.normalAngle=function(x){while(x<-Math.PI){x+=2*Math.PI}while(x>Math.PI){x-=2*Math.PI}return x};Enemy.prototype.gdis=function(x1,y1,x2,y2){return Math.sqrt((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2))};Enemy.prototype.prt=function(){var p;p=console.log;return p("position "+this.x+" "+this.y)};return Enemy}();module.exports=exports=Enemy;