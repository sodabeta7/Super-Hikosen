var Bullet,BulletPool,Max_Dis,exports,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Bullet=require("./Bullet");Max_Dis=Math.sqrt(1396*1396+678*678);BulletPool=function(){function BulletPool(size){var i,j,ref;this.size=size;this.prt=bind(this.prt,this);this.gdis=bind(this.gdis,this);this.update=bind(this.update,this);this.get=bind(this.get,this);this.free_pool=[];this.used_pool=[];for(i=j=1,ref=this.size;1<=ref?j<=ref:j>=ref;i=1<=ref?++j:--j){this.free_pool.push(new Bullet(0,0))}}BulletPool.prototype.get=function(x,y,angle){if(this.free_pool!=null&&this.free_pool.length>0){this.free_pool[0].set(x,y,angle);return this.used_pool.push(this.free_pool.shift())}};BulletPool.prototype.update=function(ship_x,ship_y){var i,results;i=this.used_pool.length;results=[];while(i--){this.used_pool[i].update();if(this.gdis(this.used_pool[i],ship_x,ship_y)>=Max_Dis){this.used_pool[i].reset();results.push(this.free_pool.push(this.used_pool.splice(i,1)[0]))}else{results.push(void 0)}}return results};BulletPool.prototype.gdis=function(b,ship_x,ship_y){return Math.sqrt(Math.pow(b.x-ship_x,2)+Math.pow(b.y-ship_y,2))};BulletPool.prototype.prt=function(){var b,j,len,p,ref,results;p=console.log;p("free : "+this.free_pool.length+" "+"used : "+this.used_pool.length);ref=this.used_pool;results=[];for(j=0,len=ref.length;j<len;j++){b=ref[j];b.prt();break}return results};return BulletPool}();module.exports=exports=BulletPool;